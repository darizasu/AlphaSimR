% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/mergePops.R
\name{mergeMultiPops}
\alias{mergeMultiPops}
\title{Merge Pop and MultiPop objects preserving structure to a depth}
\usage{
mergeMultiPops(..., level = 0)
}
\arguments{
\item{...}{One or more objects of class \code{Pop} or \code{MultiPop}.
\code{NULL} values are ignored.}

\item{level}{Integer scalar >= 0. Depth to preserve; see Details.}
}
\value{
If \code{level == 0}, or when merging yields a single \code{Pop},
a \code{\link{Pop-class}} object is returned. Otherwise a
\code{\link{MultiPop-class}} object is returned with the requested nesting
preserved.
}
\description{
Merge one or more \code{\link{Pop-class}} and
\code{\link{MultiPop-class}} objects while preserving the nesting
structure down to a user-specified depth.
}
\details{
The function accepts multiple arguments and merges them according to the 
\code{level} parameter.
\code{level = 0}: fully collapse and merge everything into a single 
  \code{\link{Pop-class}} object (all nested structures flattened 
  then merged). 
\code{level = 1}: ensure the returned object is a 
  \code{\link{MultiPop-class}} where each child is a \code{Pop-class}. 
  In this mode, if you pass multiple arguments they are each reduced 
  to a \code{Pop} (by flatten+merge as needed) and appended 
  (in the order provided) to a single top-level \code{MultiPop-class}. 
\code{level > 1}: preserve the top \code{level} levels of the 
  \code{MultiPop-class} structure. Processing descends into children, 
  decrementing \code{level} at each nested step; when \code{level} 
  reaches \code{0} at some node, that node's descendants are flattened 
  and merged.

Important behavioral notes: If a single \code{Pop-class} is provided, it 
is returned unchanged. If a single \code{MultiPop-class} is provided, it 
is processed in place according to \code{level}. If multiple objects are 
provided in \code{...}, they are combined into a \code{MultiPop-class} 
(preserving the order of arguments) and then processed according to 
\code{level}. However, this function does not generate new \code{MultiPop} 
objects. If none of the arguments is a \code{MultiPop}, an error is raised. 
\code{NULL} arguments are ignored. Passing any object that is not a 
\code{Pop-class} or \code{MultiPop-class} results in an error.

The function uses \code{\link{flattenMultiPop}} and \code{\link{mergePops}}
internally to perform flattening and efficient merging of \code{Pop} and 
\code{MultiPop} objects.
}
\examples{
\donttest{
# Create founder haplotypes
founderPop = quickHaplo(nInd=60, nChr=1, segSites=10)

# Set simulation parameters
SP = SimParam$new(founderPop)
\dontshow{SP$nThreads = 1L}
SP$addTraitA(5)

# Create population
pop = newPop(founderPop, simParam = SP)

# Create two multi-population with different levels of nesting
mp1 = newMultiPop(pop[1:10], pop[11:20])
mp2 = newMultiPop(pop[21:40],
                  newMultiPop(pop[41:50], pop[51:60]))

# Fully merge everything into one Pop
single_pop = mergeMultiPops(mp1, mp2, level=0)

# Merge into a MultiPop where each top-level child is a Pop
merged_level = mergeMultiPops(mp1, mp2, level=1)

# Preserve more nested structure (do not merge top-level MultiPop children)
merged_level2 = mergeMultiPops(mp1, mp2, level = 2)
}

}
\seealso{
\code{\link{flattenMultiPop}}, \code{\link{mergePops}},
  \code{\link{newMultiPop}}
}
